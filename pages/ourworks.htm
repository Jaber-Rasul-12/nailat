title = "Nailat - أعمالنا"
url = "/works"
layout = "default"
[GeneralComponent]
==

<!-- استدعاء المكتبات في الأعلى -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/css/splide.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.4/css/lightbox.min.css">
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/js/splide.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.4/js/lightbox.min.js"></script>

{% partial 'content/navbar_ourworks'  %}

<div style="direction: rtl;  margin-left: 10px; padding: 20px;">
    <h1 style="display: flex; justify-content: flex-start; margin: 20px 10px 30px;">
        <span style="background: #b65236; color: white; padding: 12px 30px; font-size: 30px; border-radius: 50px; font-weight: bold; box-shadow: 0 4px 15px rgba(182,82,54,0.3);">أعمالنا</span>
    </h1>
</div>

{% for item in GeneralComponent.getOurWorks %}
<div style=" margin-bottom: 40px; border-radius: 30px;">
    <div style="margin: 0 auto; padding: 0 20px;">
        
        <h2 style="text-align: right; color: #b65236; font-size: 26px; margin-bottom: 30px; padding-right: 20px; position: relative; font-weight: 600;">
            {{ item.name }}
            <span style="content: ''; position: absolute; right: 20px; bottom: -10px; width: 80px; height: 4px; background: #b65236; border-radius: 2px;"></span>
        </h2>

        <!-- سلايدر أعمال -->
        <div class="splide" id="splide-{{ loop.index }}" dir="ltr">
            <div class="splide__arrows">
                <button class="splide__arrow splide__arrow--prev" style="background: #b65236 !important; width: 50px !important; height: 50px !important;">
                    <i class="fa fa-chevron-right" style="color: white; font-size: 20px;"></i>
                </button>
                <button class="splide__arrow splide__arrow--next" style="background: #b65236 !important; width: 50px !important; height: 50px !important;">
                    <i class="fa fa-chevron-left" style="color: white; font-size: 20px;"></i>
                </button>
            </div>
            
            <div class="splide__track">
                <ul class="splide__list" style="height: 400px !important; align-items: center;">
                    {% for itemimage in item.photos %}
                    <li class="splide__slide" style="height: 100%; padding: 15px;">
                        <div style="background: white; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); padding: 20px; height: 350px; display: flex; align-items: center; justify-content: center; transition: all 0.3s ease; cursor: pointer;" 
                             onmouseover="this.style.transform='translateY(-8px)'; this.style.boxShadow='0 15px 40px rgba(182,82,54,0.25)';" 
                             onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 10px 30px rgba(0,0,0,0.1)';">
                            <a href="{{ itemimage.path }}" data-lightbox="works-{{ item.id }}" data-title="{{ item.name }}" style="display: flex; align-items: center; justify-content: center; width: 100%; height: 100%;">
                                <img src="{{ itemimage.path }}" alt="{{ item.name }}" style="max-width: 100%; max-height: 100%; width: auto; height: auto; object-fit: contain; transition: transform 0.4s ease;" 
                                     onmouseover="this.style.transform='scale(1.08)';" 
                                     onmouseout="this.style.transform='scale(1)';">
                            </a>
                        </div>
                    </li>
                    {% endfor %}
                </ul>
            </div>

            <div class="splide__pagination" style="bottom: -25px !important;"></div>
        </div>
    </div>
</div>
{% endfor %}

<script>
// تهيئة Lightbox
lightbox.option({
    'resizeDuration': 200,
    'wrapAround': true,
    'albumLabel': 'صورة %1 من %2',
    'fadeDuration': 300,
    'imageFadeDuration': 300,
    'positionFromTop': 50
});

// انتظار تحميل الصفحة بالكامل
window.addEventListener('load', function() {
    // تهيئة جميع السلايدرات
    document.querySelectorAll('.splide').forEach(function(el, index) {
        if (el.classList.contains('splide')) {
            try {
                new Splide(el, {
                    type: 'loop',
                    perPage: 3,
                    perMove: 1,
                    gap: '30px',
                    padding: '50px',
                    focus: 0,
                    pagination: true,
                    arrows: true,
                    autoplay: true,
                    interval: 3000,
                    speed: 800,
                    pauseOnHover: true,
                    pauseOnFocus: true,
                    rewind: true,
                    breakpoints: {
                        1200: { perPage: 2, gap: '25px', padding: '40px' },
                        992: { perPage: 2, gap: '20px', padding: '35px' },
                        768: { perPage: 1, gap: '15px', padding: '30px', arrows: false },
                        480: { perPage: 1, gap: '10px', padding: '20px', arrows: false }
                    }
                }).mount();
                console.log('Splide initialized for slide ' + index);
            } catch (e) {
                console.error('Error initializing Splide:', e);
            }
        }
    });
});
</script>

<style>
/* تنسيقات إضافية */
.splide__arrow {
    background: #b65236 !important;
    opacity: 1 !important;
    transition: all 0.3s ease !important;
    box-shadow: 0 4px 15px rgba(0,0,0,0.2) !important;
}

.splide__arrow:hover {
    background: #9a3e2a !important;
    transform: scale(1.15) !important;
    box-shadow: 0 6px 20px rgba(182,82,54,0.4) !important;
}

.splide__arrow--prev {
    left: 10px !important;
}

.splide__arrow--next {
    right: 10px !important;
}

.splide__pagination__page {
    background: #ddd !important;
    width: 12px !important;
    height: 12px !important;
    margin: 0 5px !important;
    transition: all 0.3s ease !important;
}

.splide__pagination__page.is-active {
    background: #b65236 !important;
    transform: scale(1.3) !important;
    width: 20px !important;
    border-radius: 10px !important;
}

/* تنسيق Lightbox */
.lb-loader, .lightbox {
    direction: ltr !important;
}

.lb-data .lb-caption {
    font-size: 16px;
    font-weight: 600;
    color: white;
    direction: rtl;
}

.lb-data .lb-number {
    font-size: 14px;
    color: #ccc;
    direction: rtl;
}

/* تنسيقات للشاشات الصغيرة */
@media (max-width: 768px) {
    .splide__list {
        height: 350px !important;
    }
    
    .splide__slide > div {
        height: 300px !important;
    }
}

@media (max-width: 480px) {
    .splide__list {
        height: 300px !important;
    }
    
    .splide__slide > div {
        height: 250px !important;
        padding: 15px !important;
    }
}
</style>